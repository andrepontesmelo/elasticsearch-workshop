{
  "aggs": {
    "colors": {
      "terms": { "field": "color" },
      "aggs": {
        "avg_price": {
          "avg": { "field": "price" }
        }
      }
    }
  }
}